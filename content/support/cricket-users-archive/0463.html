<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN"
                      "http://www.w3.org/TR/REC-html40/loose.dtd">
<HTML>
<HEAD>
<TITLE>cricket-users: Re: [cricket-users] monitor-thresholds</TITLE>
<META NAME="Author" CONTENT="trygvelu@bug.itea.ntnu.no (trygvelu@bug.itea.ntnu.no)">
<META NAME="Subject" CONTENT="Re: [cricket-users] monitor-thresholds">
</HEAD>
<BODY BGCOLOR="#FFFFFF" TEXT="#000000">
<H1>Re: [cricket-users] monitor-thresholds</H1>
<!-- received="Thu Aug  5 11:55:06 1999" -->
<!-- isoreceived="19990805185506" -->
<!-- sent="Thu, 5 Aug 1999 17:47:50 +0200 (CEST)" -->
<!-- isosent="19990805154750" -->
<!-- name="trygvelu@bug.itea.ntnu.no" -->
<!-- email="trygvelu@bug.itea.ntnu.no" -->
<!-- subject="Re: [cricket-users] monitor-thresholds" -->
<!-- id="Pine.LNX.4.10.9908051639250.5655-100000@bug.itea.ntnu.no" -->
<!-- inreplyto="852567C3.006DF781.00@NA-GATEWAYS02.NOTES.MCKINSEY.COM" -->
<STRONG>From:</STRONG> <A HREF="mailto:trygvelu@bug.itea.ntnu.no?Subject=Re:%20[cricket-users]%20monitor-thresholds&In-Reply-To=&lt;Pine.LNX.4.10.9908051639250.5655-100000@bug.itea.ntnu.no&gt;"><EM>trygvelu@bug.itea.ntnu.no</EM></A><BR>
<STRONG>Date:</STRONG> Thu Aug 05 1999 - 08:47:50 PDT
<P>
<!-- next="start" -->
<UL>
<LI><STRONG>Next message:</STRONG> <A HREF="0464.html">Tim Kennedy: "Re: [cricket-users] running the collector"</A>
<LI><STRONG>Previous message:</STRONG> <A HREF="0462.html">Berg, Ivan: "RE: [cricket-users] Trending data types"</A>
<LI><STRONG>In reply to:</STRONG> <A HREF="0461.html">Utsav Ratti: "[cricket-users] monitor-thresholds"</A>
<!-- nextthread="start" -->
<LI><STRONG>Next in thread:</STRONG> <A HREF="0468.html">Javier C. Muniz: "Re: [cricket-users] monitor-thresholds"</A>
<LI><STRONG>Reply:</STRONG> <A HREF="0468.html">Javier C. Muniz: "Re: [cricket-users] monitor-thresholds"</A>
<!-- reply="end" -->
<LI><STRONG>Messages sorted by:</STRONG> 
<A HREF="date.html#463">[ date ]</A>
<A HREF="index.html#463">[ thread ]</A>
<A HREF="subject.html#463">[ subject ]</A>
<A HREF="author.html#463">[ author ]</A>
</UL>
<HR NOSHADE><P>
<!-- body="start" -->
<P>
From: <A HREF="mailto:trygvelu@bug.itea.ntnu.no?Subject=Re:%20[cricket-users]%20monitor-thresholds&In-Reply-To=&lt;Pine.LNX.4.10.9908051639250.5655-100000@bug.itea.ntnu.no&gt;">trygvelu@bug.itea.ntnu.no</A>
<BR>
<P>On Wed, 4 Aug 1999, Utsav Ratti wrote:
<BR>
<EM>&gt; 
</EM><BR>
<EM>&gt; I want to use the 'monitor-thresholds' tag. The reference guide describes
</EM><BR>
<EM>&gt; its functionality really well, but one thing isn't clear: what happens when
</EM><BR>
<EM>&gt; a threshold is exceeded? How do I call an external script to send an alert
</EM><BR>
<EM>&gt; via e-mail or pager? The guide  mentioned traps, but where do these go?
</EM><BR>
<P>I played around a little with modifying the 'value' monitor to sending a
<BR>
mail when a threshold is exceeded. You'll have to look into the file
<BR>
Monitor.pm in cricket's lib/ and specifically the Alarm(), Clear() and
<BR>
sendMonitorTraps() subs.
<BR>
<P>Modifying the sendMonitorTraps() to something like 'sendMonitorMail()'
<BR>
should be pretty straight forward.. (Just include your favourite sendmail
<BR>
routine)
<BR>
<P><P>There's been little discussion about this feature yet, maybe someone could
<BR>
go more in-depth explaining things.
<BR>
<P>I, for one, would like to put some more functionality in this, eg have
<BR>
multiple monitors on a target for different threshold/time pairs. I think
<BR>
some new monitor would have to be built (monValueOverTime eg), and it
<BR>
could look something(?) like this in the config
<BR>
<P>#monitor if value since last update exceeds 80% 
<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;monitor-thresholds =    &quot;myds:value:0:80&quot;
<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;trap-address    =       some@address
<BR>
#monitor if value exceeds 60% over 15min period
<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;monitor-thresholds =    &quot;myds:valueovertime:15:0:60&quot;
<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;trap-address    =       some@other.address
<BR>
<P>I've only thought a little about this, I'm not even sure if you can define
<BR>
multiple monitor/trap-address pairs on the same target? If not, I could
<BR>
probably hardcode the address in the new monitor.
<BR>
<P>but now I'm babbling
<BR>
<PRE>
-- 
Trygve Lunheim
NTNU ITEA/Nett
<P><P>--------------------------- ONElist Sponsor ----------------------------
<P>GET WHAT YOU DESERVE! A NextCard Platinum VISA: DOUBLE Rewards points, 
       NO annual fee &amp; rates as low as 9.9 percent FIXED APR. 
Apply online today!                <A HREF="http://www.onelist.com/ad/nextcard1">http://www.onelist.com/ad/nextcard1</A>
<P>------------------------------------------------------------------------
</PRE>
<P><!-- body="end" -->
<HR NOSHADE>
<UL>
<!-- next="start" -->
<LI><STRONG>Next message:</STRONG> <A HREF="0464.html">Tim Kennedy: "Re: [cricket-users] running the collector"</A>
<LI><STRONG>Previous message:</STRONG> <A HREF="0462.html">Berg, Ivan: "RE: [cricket-users] Trending data types"</A>
<LI><STRONG>In reply to:</STRONG> <A HREF="0461.html">Utsav Ratti: "[cricket-users] monitor-thresholds"</A>
<!-- nextthread="start" -->
<LI><STRONG>Next in thread:</STRONG> <A HREF="0468.html">Javier C. Muniz: "Re: [cricket-users] monitor-thresholds"</A>
<LI><STRONG>Reply:</STRONG> <A HREF="0468.html">Javier C. Muniz: "Re: [cricket-users] monitor-thresholds"</A>
<!-- reply="end" -->
<LI><STRONG>Messages sorted by:</STRONG> 
<A HREF="date.html#463">[ date ]</A>
<A HREF="index.html#463">[ thread ]</A>
<A HREF="subject.html#463">[ subject ]</A>
<A HREF="author.html#463">[ author ]</A>
</UL>
<!-- trailer="footer" -->
<HR NOSHADE>
<P>
<SMALL>
<EM>
This archive was generated by <A HREF="http://www.hypermail.org/">hypermail 2b29</A> 
: <EM>Mon Mar 06 2000 - 19:00:59 PST</EM>
</EM>
</SMALL>
</BODY>
</HTML>
